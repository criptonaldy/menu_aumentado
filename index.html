<!DOCTYPE html>
<html>
<head>
    <!-- Carga Google Model Viewer (WebAR nativo) -->
    <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
    
    <!-- Para iOS: detecta .usdz autom√°ticamente -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
    <!-- Estilo: PANTALLA COMPLETA, SIN INTERFAZ -->
    <style>
        /* RESET COMPLETO - SIN M√ÅRGENES, SIN SCROLL */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background: black; /* Fondo negro para camuflar */
            position: fixed;
            top: 0;
            left: 0;
        }
        
        /* Modelo 3D ocupa TODO */
        model-viewer {
            width: 100vw;
            height: 100vh;
            background: transparent;
            --poster-color: transparent;
        }
        
        /* Bot√≥n AR MUY DISCRETO (solo si es necesario) */
        .ar-button {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.7);
            color: white;
            border: 2px solid white;
            padding: 12px 30px;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            z-index: 1000;
            opacity: 0.9;
            transition: opacity 0.3s;
        }
        
        .ar-button:hover {
            opacity: 1;
        }
        
        /* Pantalla de carga invisible */
        .loading {
            display: none;
        }
        
        /* Instrucci√≥n temporal que desaparece */
        .hint {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px 20px;
            border-radius: 10px;
            font-size: 14px;
            z-index: 1000;
            animation: fadeOut 3s forwards;
        }
        
        @keyframes fadeOut {
            0% { opacity: 1; }
            70% { opacity: 1; }
            100% { opacity: 0; display: none; }
        }
    </style>
</head>
<body>
    <!-- Mensaje breve que desaparece -->
    <div class="hint" id="hint">Escanea una superficie plana</div>
    
    <!-- ‚ö†Ô∏è CAMBIA "TU_MODELO.glb" por tu archivo REAL ‚ö†Ô∏è -->
    <model-viewer
        id="model-viewer"
        src="planta_napolitana.glb"
        ar
        ar-modes="webxr scene-viewer quick-look"
        camera-controls
        auto-rotate
        auto-rotate-delay="0"
        environment-image="neutral"
        shadow-intensity="1.5"
        exposure="1.0"
        interaction-prompt="none"
        ar-scale="fixed"
        ar-placement="floor"
        touch-action="pan-y"
        disable-zoom
        disable-pan
        field-of-view="30deg"
        style="width: 100%; height: 100%">
        
        <!-- Bot√≥n AR MUY minimalista -->
        <button class="ar-button" slot="ar-button">
            üëÅÔ∏è Ver en tu espacio
        </button>
        
    </model-viewer>
    
    <!-- Script para AR autom√°tico -->
    <script>
        // Esperar a que cargue el modelo
        const modelViewer = document.querySelector('model-viewer');
        const hint = document.getElementById('hint');
        
        modelViewer.addEventListener('load', () => {
            console.log('‚úÖ Modelo cargado');
            
            // Ocultar hint despu√©s de 3 segundos
            setTimeout(() => {
                hint.style.display = 'none';
            }, 3000);
            
            // En dispositivos iOS, intentar AR autom√°tico
            if (/iPhone|iPad|iPod/.test(navigator.userAgent)) {
                setTimeout(() => {
                    // iOS a veces necesita un toque para activar AR
                    console.log('üì± Dispositivo iOS detectado');
                }, 1000);
            }
        });
        
        // Intentar activar AR autom√°ticamente (limitado por navegadores)
        document.addEventListener('DOMContentLoaded', () => {
            // En algunos Android con Chrome, podemos simular clic en bot√≥n AR
            if (/Android/.test(navigator.userAgent) && /Chrome/.test(navigator.userAgent)) {
                setTimeout(() => {
                    const arButton = document.querySelector('[slot="ar-button"]');
                    if (arButton) {
                        console.log('ü§ñ Android detectado - AR disponible');
                    }
                }, 2000);
            }
        });
        
        // Ocultar bot√≥n cuando est√© en modo AR
        modelViewer.addEventListener('enter-ar', () => {
            document.querySelector('.ar-button').style.display = 'none';
            hint.style.display = 'none';
        });
        
        // Mostrar bot√≥n cuando salga de AR
        modelViewer.addEventListener('exit-ar', () => {
            document.querySelector('.ar-button').style.display = 'block';
        });
    </script>
</body>
</html>
